---
title: Python 模块文档字符串规范指南 (PEP 257)
date: 2026-01-11 17:22:35
tags: python
---

这是一份基于 **PEP 257** 标准编写的 **Python 模块文档字符串 (Module Docstrings) 技术规范文档**。

## 1. 简介

文档字符串（Docstring）是出现在模块、函数、类或方法定义中的第一个语句（字符串字面量）。Python 编译器会自动将该字符串识别为文档，并赋值给对象的 `__doc__` 属性。

本指南专门针对 **模块（Module）** 级别的文档字符串规范进行说明。

## 2. 核心原则

- **必须使用三双引号**：无论文档只有一行还是多行，始终使用 `"""` 包裹文档字符串。不要使用单引号 `'''`。
- **位置必须置顶**：模块文档字符串必须是文件中的第一个语句（在 import 之前，但在 shebang `#!` 和编码声明之后）。
- **句号结尾**：摘要行必须以句号（英文 `.` 或中文 `。`）结尾。

## 3. 两种格式规范

### 3.1 单行文档 (One-line Docstrings)

适用于功能非常简单明显的模块。

- **规范**：

  - 整个文档（包括引号）必须在同一行。
  - 前后引号与文本之间**不要**有空格。
  - 必须是对功能的描述性短语（"Do X"），而不是描述性动作（"Does X"）。

- **示例**：

  Python

  ```
  # 正确
  """API 核心认证模块。"""
  
  # 错误 (多余的空格)
  """ API 核心认证模块。 """
  
  # 错误 (使用了三单引号)
  '''API 核心认证模块。'''
  ```

### 3.2 多行文档 (Multi-line Docstrings)

适用于大多数脚本和库模块，由 **摘要行** 和 **详细描述** 组成。

- **规范**：

  1. **摘要行**：第一行紧跟在起始引号后，简明扼要地说明模块用途。
  2. **空行**：第二行必须是空行，用于在视觉上分隔摘要和细节。
  3. **详细描述**：从第三行开始，详细说明模块的功能、算法、依赖关系等。
  4. **结束引号**：结束的三引号 `"""` 必须**独占一行**。

- **示例**：

  Python

  ```
  """
  处理 CSV 文件的导入与清洗工具。
  
  本模块提供了一组类用于读取脏数据 CSV，
  去除无效行，并将结果标准化为 JSON 格式。
  
  依赖项:
      pandas >= 1.0
  """
  ```

## 4. 模块文档应包含的内容

根据模块的用途不同，文档侧重点应有所不同：

### 4.1 脚本文件 (Script)

如果该文件主要是作为命令行工具运行（如 `main.py`）：

- 说明脚本的功能。
- 列出命令行参数（Arguments）语法。
- 列出环境变量。
- 提供简单的使用示例。

### 4.2 库文件 (Library Module)

如果该文件主要是被导入使用（如 `utils.py`）：

- 列出该模块导出的主要类 (Classes) 和函数 (Functions)。
- 列出主要异常 (Exceptions)。
- **不需要**详细说明每个函数怎么用（那是函数级 Docstring 的事），只需概括模块整体能力。

## 5. 缩进处理 (Indentation)

PEP 257 规定，文档字符串的处理工具（如 `doctest`）会自动剥离缩进。

- **规则**：起始引号后的第一行不需要缩进。后续行的缩进应与起始引号的缩进层级一致（对于模块文档，通常是顶格写，无需缩进）。

## 6. 标准模板示例

以下是一个符合 PEP 257 的完整模块文件头示例：

Python

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
电商数据处理与分析模块。

本模块通过 DataAnalyzer 类封装了所有的销售数据计算逻辑。
它支持从 SQL 数据库读取原始数据，并计算 WoW (周环比) 和 YoY (年同比)。

包含的主要类:
    DataAnalyzer: 数据分析主类。
    ReportGenerator: 生成 PDF 报告的工具类。

使用示例:
    python -m analysis.core --date 2023-10-01
"""

import sys
import os

# 模块级变量定义
__version__ = '1.0.2'
```

------

### 建议的下一步

为了确保团队严格遵守此规范，建议在项目中引入 **Docstring 检查工具**。

**您希望我演示如何在 `flake8` 或 `pylint` 中配置 PEP 257 的自动检查规则吗？**
